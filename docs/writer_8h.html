<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pack: include/pack/writer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pack<span id="projectnumber">&#160;v2.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('writer_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">writer.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Pack file writer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="common_8h.html">pack/common.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af3c662448208e05e8e4db313b9a666e7" id="r_af3c662448208e05e8e4db313b9a666e7"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af3c662448208e05e8e4db313b9a666e7">OnPackFile</a>) (uint64_t itemIndex, void *argument)</td></tr>
<tr class="memdesc:af3c662448208e05e8e4db313b9a666e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">File packing callback.  <br /></td></tr>
<tr class="separator:af3c662448208e05e8e4db313b9a666e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab656c89d67039b4c1100a845a16b82de" id="r_ab656c89d67039b4c1100a845a16b82de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab656c89d67039b4c1100a845a16b82de">packFiles</a> (const char *packPath, uint64_t fileCount, const char **fileItemPaths, float zipThreshold, bool printProgress, <a class="el" href="#af3c662448208e05e8e4db313b9a666e7">OnPackFile</a> onPackFile, void *argument)</td></tr>
<tr class="memdesc:ab656c89d67039b4c1100a845a16b82de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs files to the Pack archive.  <br /></td></tr>
<tr class="separator:ab656c89d67039b4c1100a845a16b82de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pack file writer. </p>
<p>Used to pack files into a Pack archives. During packing, files are compressed with maximum ZSTD compression, or written as they are if they are already compressed. Additionally, each file is checked for data duplication, and in cases where two files are identical, a reference to the data of the already packed file is written. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="af3c662448208e05e8e4db313b9a666e7" name="af3c662448208e05e8e4db313b9a666e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3c662448208e05e8e4db313b9a666e7">&#9670;&#160;</a></span>OnPackFile</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* OnPackFile) (uint64_t itemIndex, void *argument)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>File packing callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">itemIndex</td><td>current packing item index </td></tr>
    <tr><td class="paramname">argument</td><td>callback agument, or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab656c89d67039b4c1100a845a16b82de" name="ab656c89d67039b4c1100a845a16b82de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab656c89d67039b4c1100a845a16b82de">&#9670;&#160;</a></span>packFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> packFiles </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>packPath</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>fileCount</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **</td>          <td class="paramname"><span class="paramname"><em>fileItemPaths</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>zipThreshold</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>printProgress</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#af3c662448208e05e8e4db313b9a666e7">OnPackFile</a></td>          <td class="paramname"><span class="paramname"><em>onPackFile</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>argument</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packs files to the Pack archive. </p>
<p>The main function for packing a Pack archives. It reads the provided files and compresses them with maximum possible compression. You can speed up the runtime file decompression by specifying a zipThreshold value, as if after compression, we achieve only 10% compression, then decompression will consume more resources than we save on file size. The optimal float value for the zipThreshold is 0.1f.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">packPath</td><td>output Pack file path string </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">fileCount</td><td>file count to pack </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileItemPaths</td><td>pack file and item path string array (file/item, file/item...) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">zipThreshold</td><td>compression threshold (0.0 - 1.0 range) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">printProgress</td><td>output packing progress to the stdout </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">onPackFile</td><td>file packing callback, or NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argument</td><td>file packing callback argument, or NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> code. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_da693808afc5959eeee8fd1ea925aa29.html">pack</a></li><li class="navelem"><a class="el" href="writer_8h.html">writer.h</a></li>
    <li class="footer">Generated on Sat Feb 3 2024 for Pack by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
