<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pack: include/pack/common.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pack<span id="projectnumber">&#160;v2.0.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('common_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">common.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Common Pack library functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;pack/defines.h&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:struct_pack_header" id="r_struct_pack_header"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#struct_pack_header">PackHeader</a></td></tr>
<tr class="memdesc:struct_pack_header"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack file header structure.  <a href="#struct_pack_header">More...</a><br /></td></tr>
<tr class="separator:struct_pack_header"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:struct_pack_item_header" id="r_struct_pack_item_header"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#struct_pack_item_header">PackItemHeader</a></td></tr>
<tr class="memdesc:struct_pack_item_header"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack item header structure.  <a href="#struct_pack_item_header">More...</a><br /></td></tr>
<tr class="separator:struct_pack_item_header"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a31167b3e857e6b4d92737715179eb799" id="r_a31167b3e857e6b4d92737715179eb799"><td class="memItemLeft" align="right" valign="top"><a id="a31167b3e857e6b4d92737715179eb799" name="a31167b3e857e6b4d92737715179eb799"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PACK_HEADER_MAGIC</b>&#160;&#160;&#160;(('P' &lt;&lt; 24) | ('A' &lt;&lt; 16) | ('C' &lt;&lt; 8) | 'K')</td></tr>
<tr class="memdesc:a31167b3e857e6b4d92737715179eb799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack file header magic number. <br /></td></tr>
<tr class="separator:a31167b3e857e6b4d92737715179eb799"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a0d32300bf8cf2d158503f717426f801a" id="r_a0d32300bf8cf2d158503f717426f801a"><td class="memItemLeft" align="right" valign="top"><a id="a0d32300bf8cf2d158503f717426f801a" name="a0d32300bf8cf2d158503f717426f801a"></a>
typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>PackResult</b></td></tr>
<tr class="memdesc:a0d32300bf8cf2d158503f717426f801a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack result code type. <br /></td></tr>
<tr class="separator:a0d32300bf8cf2d158503f717426f801a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a879791abc79b4a9655f4d6cf7a36cda9" id="r_a879791abc79b4a9655f4d6cf7a36cda9"><td class="memItemLeft" align="right" valign="top"><a id="a879791abc79b4a9655f4d6cf7a36cda9" name="a879791abc79b4a9655f4d6cf7a36cda9"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a879791abc79b4a9655f4d6cf7a36cda9">PackResult_T</a> { <br />
&#160;&#160;<b>SUCCESS_PACK_RESULT</b> = 0
, <b>FAILED_TO_ALLOCATE_PACK_RESULT</b> = 1
, <b>FAILED_TO_CREATE_ZSTD_PACK_RESULT</b> = 2
, <b>FAILED_TO_CREATE_FILE_PACK_RESULT</b> = 3
, <br />
&#160;&#160;<b>FAILED_TO_OPEN_FILE_PACK_RESULT</b> = 4
, <b>FAILED_TO_WRITE_FILE_PACK_RESULT</b> = 5
, <b>FAILED_TO_READ_FILE_PACK_RESULT</b> = 6
, <b>FAILED_TO_SEEK_FILE_PACK_RESULT</b> = 7
, <br />
&#160;&#160;<b>FAILED_TO_GET_DIRECTORY_PACK_RESULT</b> = 8
, <b>FAILED_TO_DECOMPRESS_PACK_RESULT</b> = 9
, <b>FAILED_TO_GET_ITEM_PACK_RESULT</b> = 10
, <b>BAD_DATA_SIZE_PACK_RESULT</b> = 11
, <br />
&#160;&#160;<b>BAD_FILE_TYPE_PACK_RESULT</b> = 12
, <b>BAD_FILE_VERSION_PACK_RESULT</b> = 13
, <b>BAD_FILE_ENDIANNESS_PACK_RESULT</b> = 14
, <b>PACK_RESULT_COUNT</b> = 15
<br />
 }</td></tr>
<tr class="memdesc:a879791abc79b4a9655f4d6cf7a36cda9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack result codes. <br /></td></tr>
<tr class="separator:a879791abc79b4a9655f4d6cf7a36cda9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae48107775eaae834d65348bd8a7b3684" id="r_ae48107775eaae834d65348bd8a7b3684"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae48107775eaae834d65348bd8a7b3684">getPackLibraryVersion</a> (uint8_t *major, uint8_t *minor, uint8_t *patch)</td></tr>
<tr class="memdesc:ae48107775eaae834d65348bd8a7b3684"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Pack library hardcoded version. (MT-Safe)  <br /></td></tr>
<tr class="separator:ae48107775eaae834d65348bd8a7b3684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b87839cf3d57486d354040547c335b" id="r_ad3b87839cf3d57486d354040547c335b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a0d32300bf8cf2d158503f717426f801a">PackResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad3b87839cf3d57486d354040547c335b">readPackHeader</a> (const char *filePath, <a class="el" href="#struct_pack_header">PackHeader</a> *header)</td></tr>
<tr class="memdesc:ad3b87839cf3d57486d354040547c335b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads Pack header from the file. (MT-Safe)  <br /></td></tr>
<tr class="separator:ad3b87839cf3d57486d354040547c335b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Common Pack library functions. </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="struct_pack_header" id="struct_pack_header"></a>
<h2 class="memtitle"><span class="permalink"><a href="#struct_pack_header">&#9670;&#160;</a></span>PackHeader</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct PackHeader</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Pack file header structure. </p>
<p>Each Pack file begins with a header that contains information about the library and system used for packing the files. It also contains the total number of files inside the archive. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a57f54349f4fd1cbbb52058812e146af2" name="a57f54349f4fd1cbbb52058812e146af2"></a>uint32_t</td>
<td class="fieldname">
magic</td>
<td class="fielddoc">
<p>Pack file magic number </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a0eaad29a67c89bdd2ca4ca45d716f6a4" name="a0eaad29a67c89bdd2ca4ca45d716f6a4"></a>uint8_t</td>
<td class="fieldname">
versionMajor</td>
<td class="fielddoc">
<p>File format major version </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aa71535da9dba395ea5095204f1271e77" name="aa71535da9dba395ea5095204f1271e77"></a>uint8_t</td>
<td class="fieldname">
versionMinor</td>
<td class="fielddoc">
<p>File format minor version </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aa492192162e88c30ffb70a9b05c533a9" name="aa492192162e88c30ffb70a9b05c533a9"></a>uint8_t</td>
<td class="fieldname">
versionPatch</td>
<td class="fielddoc">
<p>File format patch version </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae34821109f6fd040178db4a359b4e8fd" name="ae34821109f6fd040178db4a359b4e8fd"></a>uint8_t</td>
<td class="fieldname">
isBigEndian</td>
<td class="fielddoc">
<p>Is packed data format big endian </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a03531205dbb8decac895316c08273aab" name="a03531205dbb8decac895316c08273aab"></a>uint64_t</td>
<td class="fieldname">
itemCount</td>
<td class="fielddoc">
<p>Total pack itrm count </p>
</td></tr>
</table>

</div>
</div>
<a name="struct_pack_item_header" id="struct_pack_item_header"></a>
<h2 class="memtitle"><span class="permalink"><a href="#struct_pack_item_header">&#9670;&#160;</a></span>PackItemHeader</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct PackItemHeader</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Pack item header structure. </p>
<p>Contains information about the packed file inside the archive. This includes the size of its path, the size of compressed data, whether data are compressed, and the location of the data within the archive file. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="abc9a46b073661e9af4a59c2044a00667" name="abc9a46b073661e9af4a59c2044a00667"></a>uint32_t</td>
<td class="fieldname">
zipSize</td>
<td class="fielddoc">
<p>Compressed item size in bytes </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae3c68f6750377179ad148e76693cc7d1" name="ae3c68f6750377179ad148e76693cc7d1"></a>uint32_t</td>
<td class="fieldname">
dataSize</td>
<td class="fielddoc">
<p>Uncompressed item size in bytes </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aeda68a665c2f6d59498b28533618d93f" name="aeda68a665c2f6d59498b28533618d93f"></a>uint8_t</td>
<td class="fieldname">
pathSize: 8</td>
<td class="fielddoc">
<p>Item path string length </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a6646e2c22056376d27b66c888b0e2cea" name="a6646e2c22056376d27b66c888b0e2cea"></a>uint8_t</td>
<td class="fieldname">
isReference: 1</td>
<td class="fielddoc">
<p>Is binary data shared between several items </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a3740df413de90e9ed6e5fa6e3e1d3f36" name="a3740df413de90e9ed6e5fa6e3e1d3f36"></a>uint64_t</td>
<td class="fieldname">
dataOffset: 55</td>
<td class="fielddoc">
<p>Binary data offset in the Pack file </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae48107775eaae834d65348bd8a7b3684" name="ae48107775eaae834d65348bd8a7b3684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae48107775eaae834d65348bd8a7b3684">&#9670;&#160;</a></span>getPackLibraryVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getPackLibraryVersion </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>major</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>minor</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>patch</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns Pack library hardcoded version. (MT-Safe) </p>
<p>Useful in cases when we load a dynamic Pack library (.dll) or use it from another programming language. (ex. C#, Java)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">major</td><td>pointer to the uint32_t major version </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">minor</td><td>pointer to the uint32_t minor version </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">patch</td><td>pointer to the uint32_t patch version </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad3b87839cf3d57486d354040547c335b" name="ad3b87839cf3d57486d354040547c335b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b87839cf3d57486d354040547c335b">&#9670;&#160;</a></span>readPackHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a0d32300bf8cf2d158503f717426f801a">PackResult</a> readPackHeader </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filePath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#struct_pack_header">PackHeader</a> *</td>          <td class="paramname"><span class="paramname"><em>header</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads Pack header from the file. (MT-Safe) </p>
<p>We can retrieve information about the package without creating an instance and loading the paths of all packed files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>target file path string </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">header</td><td>pointer to the <a class="el" href="#struct_pack_header">PackHeader</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="#a0d32300bf8cf2d158503f717426f801a">PackResult</a> code.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS_PACK_RESULT</td><td>on success </td></tr>
    <tr><td class="paramname">FAILED_TO_OPEN_FILE_PACK_RESULT</td><td>if file doesn't exist </td></tr>
    <tr><td class="paramname">BAD_FILE_TYPE_PACK_RESULT</td><td>if file header has bad magic number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_da693808afc5959eeee8fd1ea925aa29.html">pack</a></li><li class="navelem"><a class="el" href="common_8h.html">common.h</a></li>
    <li class="footer">Generated on Tue Aug 20 2024 for Pack by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
