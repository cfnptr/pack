<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pack: include/pack/reader.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pack<span id="projectnumber">&#160;v2.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('reader_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">reader.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Pack file reader.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="common_8h.html">pack/common.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab94cef8a2ec765ce2bf549a9d08c8d88" id="r_ab94cef8a2ec765ce2bf549a9d08c8d88"><td class="memItemLeft" align="right" valign="top"><a id="ab94cef8a2ec765ce2bf549a9d08c8d88" name="ab94cef8a2ec765ce2bf549a9d08c8d88"></a>
typedef struct <a class="el" href="#ab94cef8a2ec765ce2bf549a9d08c8d88">PackReader_T</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PackReader_T</b></td></tr>
<tr class="memdesc:ab94cef8a2ec765ce2bf549a9d08c8d88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack reader structure. <br /></td></tr>
<tr class="separator:ab94cef8a2ec765ce2bf549a9d08c8d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753b3443bdd346e89a78c7ef8c881e7c" id="r_a753b3443bdd346e89a78c7ef8c881e7c"><td class="memItemLeft" align="right" valign="top"><a id="a753b3443bdd346e89a78c7ef8c881e7c" name="a753b3443bdd346e89a78c7ef8c881e7c"></a>
typedef <a class="el" href="#ab94cef8a2ec765ce2bf549a9d08c8d88">PackReader_T</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>PackReader</b></td></tr>
<tr class="memdesc:a753b3443bdd346e89a78c7ef8c881e7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack reader instance. <br /></td></tr>
<tr class="separator:a753b3443bdd346e89a78c7ef8c881e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a595d8db158d12d9b7e3bcc4a51ba65cc" id="r_a595d8db158d12d9b7e3bcc4a51ba65cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a595d8db158d12d9b7e3bcc4a51ba65cc">createFilePackReader</a> (const char *filePath, uint32_t dataVersion, bool isResourcesDirectory, uint32_t threadCount, <a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> *packReader)</td></tr>
<tr class="memdesc:a595d8db158d12d9b7e3bcc4a51ba65cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new file pack reader instance.  <br /></td></tr>
<tr class="separator:a595d8db158d12d9b7e3bcc4a51ba65cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2588104968fd4901039bea3c8a3c2c4a" id="r_a2588104968fd4901039bea3c8a3c2c4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2588104968fd4901039bea3c8a3c2c4a">destroyPackReader</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader)</td></tr>
<tr class="memdesc:a2588104968fd4901039bea3c8a3c2c4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys Pack reader instance.  <br /></td></tr>
<tr class="separator:a2588104968fd4901039bea3c8a3c2c4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08e4c1e05444aa01cfd70e38f44a19c3" id="r_a08e4c1e05444aa01cfd70e38f44a19c3"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08e4c1e05444aa01cfd70e38f44a19c3">getPackItemCount</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader)</td></tr>
<tr class="memdesc:a08e4c1e05444aa01cfd70e38f44a19c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns total Pack item count. (MT-Safe)  <br /></td></tr>
<tr class="separator:a08e4c1e05444aa01cfd70e38f44a19c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac42a354e3e4cd083ac94798a70d9f1fb" id="r_ac42a354e3e4cd083ac94798a70d9f1fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac42a354e3e4cd083ac94798a70d9f1fb">getPackItemIndex</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader, const char *path, uint64_t *index)</td></tr>
<tr class="memdesc:ac42a354e3e4cd083ac94798a70d9f1fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Pack item index if it is found. (MT-Safe)  <br /></td></tr>
<tr class="separator:ac42a354e3e4cd083ac94798a70d9f1fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4bb5d71bac2f2ea11b442ec81f26c0" id="r_a3c4bb5d71bac2f2ea11b442ec81f26c0"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c4bb5d71bac2f2ea11b442ec81f26c0">getPackItemDataSize</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader, uint64_t index)</td></tr>
<tr class="memdesc:a3c4bb5d71bac2f2ea11b442ec81f26c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Pack item uncompressed data size in bytes. (MT-Safe)  <br /></td></tr>
<tr class="separator:a3c4bb5d71bac2f2ea11b442ec81f26c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4886aa6408edd5b398f556915084012" id="r_ad4886aa6408edd5b398f556915084012"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4886aa6408edd5b398f556915084012">getPackItemZipSize</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader, uint64_t index)</td></tr>
<tr class="memdesc:ad4886aa6408edd5b398f556915084012"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Pack item compressed data size in bytes. (MT-Safe)  <br /></td></tr>
<tr class="separator:ad4886aa6408edd5b398f556915084012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f47e224cd50d9c473667310300c169f" id="r_a8f47e224cd50d9c473667310300c169f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f47e224cd50d9c473667310300c169f">readPackItemData</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader, uint64_t itemIndex, uint8_t *buffer, uint32_t threadIndex)</td></tr>
<tr class="memdesc:a8f47e224cd50d9c473667310300c169f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads Pack item binary data. (MT-Safe)  <br /></td></tr>
<tr class="separator:a8f47e224cd50d9c473667310300c169f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a38159cf59e38d617102c42b1ca4be" id="r_a88a38159cf59e38d617102c42b1ca4be"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a88a38159cf59e38d617102c42b1ca4be">getPackItemFileOffset</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader, uint64_t index)</td></tr>
<tr class="memdesc:a88a38159cf59e38d617102c42b1ca4be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Pack item data offset in the archive file. (MT-Safe)  <br /></td></tr>
<tr class="separator:a88a38159cf59e38d617102c42b1ca4be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafbf85c92ddb32638b942d45d8620ebf" id="r_aafbf85c92ddb32638b942d45d8620ebf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aafbf85c92ddb32638b942d45d8620ebf">isPackItemReference</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader, uint64_t index)</td></tr>
<tr class="memdesc:aafbf85c92ddb32638b942d45d8620ebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if pack item is a reference to a duplicate item. (MT-Safe)  <br /></td></tr>
<tr class="separator:aafbf85c92ddb32638b942d45d8620ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b5dd884d780f333b0806fb345f09e8" id="r_a51b5dd884d780f333b0806fb345f09e8"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51b5dd884d780f333b0806fb345f09e8">getPackItemPath</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader, uint64_t index)</td></tr>
<tr class="memdesc:a51b5dd884d780f333b0806fb345f09e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Pack item path string. (MT-Safe)  <br /></td></tr>
<tr class="separator:a51b5dd884d780f333b0806fb345f09e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d81963d8af62ff2f51f55f875210da" id="r_a38d81963d8af62ff2f51f55f875210da"><td class="memItemLeft" align="right" valign="top">void **const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a38d81963d8af62ff2f51f55f875210da">getPackZstdContexts</a> (<a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> packReader)</td></tr>
<tr class="memdesc:a38d81963d8af62ff2f51f55f875210da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Pack ZSTD context array. (MT-Safe)  <br /></td></tr>
<tr class="separator:a38d81963d8af62ff2f51f55f875210da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a617e2e930f889a1e9a4f616db6f139b3" id="r_a617e2e930f889a1e9a4f616db6f139b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a617e2e930f889a1e9a4f616db6f139b3">unpackFiles</a> (const char *filePath, bool printProgress)</td></tr>
<tr class="memdesc:a617e2e930f889a1e9a4f616db6f139b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unpacks files from the pack. (MT-Safe)  <br /></td></tr>
<tr class="separator:a617e2e930f889a1e9a4f616db6f139b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pack file reader. </p>
<p>Used to read Pack archives at runtime. When opening a file, only information about file names and their locations in the archive is loaded to save RAM and CPU time. After that, it's possible to selectively extract only the necessary files from the archive. Loading data from files can be done concurrently from multiple threads. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a595d8db158d12d9b7e3bcc4a51ba65cc" name="a595d8db158d12d9b7e3bcc4a51ba65cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a595d8db158d12d9b7e3bcc4a51ba65cc">&#9670;&#160;</a></span>createFilePackReader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> createFilePackReader </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filePath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>dataVersion</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>isResourcesDirectory</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>threadCount</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a> *</td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new file pack reader instance. </p>
<p>The main function for opening Pack archives. It creates a new Pack reader instance and reads information about the location of packed files in the file. Subsequently, it organizes this information for quick searching and reading data from the archive file.</p>
<dl class="section note"><dt>Note</dt><dd>You should destroy created Pack instance manually.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>target Pack file path string </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">dataVersion</td><td>target packed file data version (0 = ignore data version) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">isResourcesDirectory</td><td>read from the resources directory (Android/iOS/macOS only) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">threadCount</td><td>max concurrent read thread count </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">packReader</td><td>pointer to the Pack reader instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> code and writes reader instance on success.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS_PACK_RESULT</td><td>on success </td></tr>
    <tr><td class="paramname">FAILED_TO_ALLOCATE_PACK_RESULT</td><td>if out of memory </td></tr>
    <tr><td class="paramname">FAILED_TO_GET_DIRECTORY_PACK_RESULT</td><td>if failed to get resources directory path </td></tr>
    <tr><td class="paramname">FAILED_TO_OPEN_FILE_PACK_RESULT</td><td>if file doesn't exist </td></tr>
    <tr><td class="paramname">FAILED_TO_CREATE_ZSTD_PACK_RESULT</td><td>if failed to create ZSTD contexts </td></tr>
    <tr><td class="paramname">FAILED_TO_READ_FILE_PACK_RESULT</td><td>if failed to read Pack file data </td></tr>
    <tr><td class="paramname">FAILED_TO_SEEK_FILE_PACK_RESULT</td><td>if failed to seek Pack file data </td></tr>
    <tr><td class="paramname">BAD_FILE_TYPE_PACK_RESULT</td><td>if file is not a Pack archive </td></tr>
    <tr><td class="paramname">BAD_FILE_VERSION_PACK_RESULT</td><td>if different Pack file version </td></tr>
    <tr><td class="paramname">BAD_FILE_ENDIANNESS_PACK_RESULT</td><td>if different Pack file data endianness </td></tr>
    <tr><td class="paramname">BAD_DATA_SIZE_PACK_RESULT</td><td>if bad Pack file data size </td></tr>
    <tr><td class="paramname">BAD_FILE_DATA_VERSION_PACK_RESULT</td><td>if bad packed file data version </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2588104968fd4901039bea3c8a3c2c4a" name="a2588104968fd4901039bea3c8a3c2c4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2588104968fd4901039bea3c8a3c2c4a">&#9670;&#160;</a></span>destroyPackReader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroyPackReader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys Pack reader instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a08e4c1e05444aa01cfd70e38f44a19c3" name="a08e4c1e05444aa01cfd70e38f44a19c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e4c1e05444aa01cfd70e38f44a19c3">&#9670;&#160;</a></span>getPackItemCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t getPackItemCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns total Pack item count. (MT-Safe) </p>
<p>You can use the returned value to iterate over all Pack archive files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total number of the items inside Pack file. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Integer</td><td>between 1 and 18,446,744,073,709,551,615 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac42a354e3e4cd083ac94798a70d9f1fb" name="ac42a354e3e4cd083ac94798a70d9f1fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac42a354e3e4cd083ac94798a70d9f1fb">&#9670;&#160;</a></span>getPackItemIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool getPackItemIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns Pack item index if it is found. (MT-Safe) </p>
<p>You can use the returned item index to obtain it's complete information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">packReader</td><td>pack reader instance </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>item path string used to pack the file </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">index</td><td>pointer to the uint64_t item index</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if item is found and writes index value, otherwise false. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the item has been found </td></tr>
    <tr><td class="paramname">false</td><td>if file doesn't exist in the Pack </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c4bb5d71bac2f2ea11b442ec81f26c0" name="a3c4bb5d71bac2f2ea11b442ec81f26c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c4bb5d71bac2f2ea11b442ec81f26c0">&#9670;&#160;</a></span>getPackItemDataSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t getPackItemDataSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns Pack item uncompressed data size in bytes. (MT-Safe) </p>
<p>Use the returned item binary size to allocate a memory block for data reading.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance </td></tr>
    <tr><td class="paramname">index</td><td>uint64_t item index</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The data binary size. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Integer</td><td>between 1 and 4,294,967,295 (4GB) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad4886aa6408edd5b398f556915084012" name="ad4886aa6408edd5b398f556915084012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4886aa6408edd5b398f556915084012">&#9670;&#160;</a></span>getPackItemZipSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t getPackItemZipSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns Pack item compressed data size in bytes. (MT-Safe) </p>
<p>You can use the returned item zipped binary size for statistics or to determine if it is compressed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance </td></tr>
    <tr><td class="paramname">index</td><td>uint64_t item index</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The data binary size, or 0 if item is not compressed. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Integer</td><td>between 1 and 4,294,967,295 if compressed. (4GB) </td></tr>
    <tr><td class="paramname">0</td><td>if item is not compressed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8f47e224cd50d9c473667310300c169f" name="a8f47e224cd50d9c473667310300c169f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f47e224cd50d9c473667310300c169f">&#9670;&#160;</a></span>readPackItemData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> readPackItemData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>itemIndex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>threadIndex</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads Pack item binary data. (MT-Safe) </p>
<p>The main function for loading item data from a file into memory. Additionally, we can pass the index of the current thread and load the data asynchronously.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">packReader</td><td>pack reader instance </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">itemIndex</td><td>uint64_t item index </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>target buffer where to read the item data </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">threadIndex</td><td>current thread index or 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> code and writes reader instance on success.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS_PACK_RESULT</td><td>- successful operation </td></tr>
    <tr><td class="paramname">FAILED_TO_ALLOCATE_PACK_RESULT</td><td>- out of memory </td></tr>
    <tr><td class="paramname">FAILED_TO_READ_FILE_PACK_RESULT</td><td>- failed to read Pack file data </td></tr>
    <tr><td class="paramname">FAILED_TO_SEEK_FILE_PACK_RESULT</td><td>- failed to seek Pack file data </td></tr>
    <tr><td class="paramname">FAILED_TO_DECOMPRESS_PACK_RESULT</td><td>- compressed file data is damaged </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a88a38159cf59e38d617102c42b1ca4be" name="a88a38159cf59e38d617102c42b1ca4be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88a38159cf59e38d617102c42b1ca4be">&#9670;&#160;</a></span>getPackItemFileOffset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t getPackItemFileOffset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns Pack item data offset in the archive file. (MT-Safe) </p>
<p>Internally used to read an item data from the archive file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance </td></tr>
    <tr><td class="paramname">index</td><td>uint64_t item index</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The data offset in the file. </dd></dl>

</div>
</div>
<a id="aafbf85c92ddb32638b942d45d8620ebf" name="aafbf85c92ddb32638b942d45d8620ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafbf85c92ddb32638b942d45d8620ebf">&#9670;&#160;</a></span>isPackItemReference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isPackItemReference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if pack item is a reference to a duplicate item. (MT-Safe) </p>
<p>Internally Pack shares binary data block between the same items.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance </td></tr>
    <tr><td class="paramname">index</td><td>uint64_t item index</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if item is a reference, otherwise false. </dd></dl>

</div>
</div>
<a id="a51b5dd884d780f333b0806fb345f09e8" name="a51b5dd884d780f333b0806fb345f09e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b5dd884d780f333b0806fb345f09e8">&#9670;&#160;</a></span>getPackItemPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * getPackItemPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns Pack item path string. (MT-Safe) </p>
<p>You can get the Pack item path when iterating over all items. </p><dl class="section warning"><dt>Warning</dt><dd>You should not free the returned string.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance </td></tr>
    <tr><td class="paramname">index</td><td>uint64_t item index</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Pack item path sting. </dd></dl>

</div>
</div>
<a id="a38d81963d8af62ff2f51f55f875210da" name="a38d81963d8af62ff2f51f55f875210da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38d81963d8af62ff2f51f55f875210da">&#9670;&#160;</a></span>getPackZstdContexts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void **const getPackZstdContexts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a753b3443bdd346e89a78c7ef8c881e7c">PackReader</a></td>          <td class="paramname"><span class="paramname"><em>packReader</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns Pack ZSTD context array. (MT-Safe) </p>
<p>Can be used to share the ZSTD contexts in the program. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packReader</td><td>pack reader instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Array of the ZSTD_DCtx* contexts. </dd></dl>

</div>
</div>
<a id="a617e2e930f889a1e9a4f616db6f139b3" name="a617e2e930f889a1e9a4f616db6f139b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a617e2e930f889a1e9a4f616db6f139b3">&#9670;&#160;</a></span>unpackFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> unpackFiles </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filePath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>printProgress</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unpacks files from the pack. (MT-Safe) </p>
<p>This function is useful when we need to create a unpacker for debugging a program.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>target Pack file path string </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">printProgress</td><td>output unpacking progress to the stdout</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="common_8h.html#a0d32300bf8cf2d158503f717426f801a">PackResult</a> code and unpacks files on success.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS_PACK_RESULT</td><td>on success </td></tr>
    <tr><td class="paramname">FAILED_TO_ALLOCATE_PACK_RESULT</td><td>if out of memory </td></tr>
    <tr><td class="paramname">FAILED_TO_GET_DIRECTORY_PACK_RESULT</td><td>if failed to get resources directory path </td></tr>
    <tr><td class="paramname">FAILED_TO_OPEN_FILE_PACK_RESULT</td><td>if file doesn't exist </td></tr>
    <tr><td class="paramname">FAILED_TO_CREATE_ZSTD_PACK_RESULT</td><td>if failed to create ZSTD contexts </td></tr>
    <tr><td class="paramname">FAILED_TO_READ_FILE_PACK_RESULT</td><td>if failed to read Pack file data </td></tr>
    <tr><td class="paramname">FAILED_TO_SEEK_FILE_PACK_RESULT</td><td>if failed to seek Pack file data </td></tr>
    <tr><td class="paramname">BAD_FILE_TYPE_PACK_RESULT</td><td>if file is not a Pack archive </td></tr>
    <tr><td class="paramname">BAD_FILE_VERSION_PACK_RESULT</td><td>if different Pack file version </td></tr>
    <tr><td class="paramname">BAD_FILE_ENDIANNESS_PACK_RESULT</td><td>if different Pack file data endianness </td></tr>
    <tr><td class="paramname">BAD_DATA_SIZE_PACK_RESULT</td><td>if bad Pack file data size </td></tr>
    <tr><td class="paramname">BAD_FILE_DATA_VERSION_PACK_RESULT</td><td>if bad packed file data version </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_da693808afc5959eeee8fd1ea925aa29.html">pack</a></li><li class="navelem"><a class="el" href="reader_8h.html">reader.h</a></li>
    <li class="footer">Generated on Sun Apr 27 2025 for Pack by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
